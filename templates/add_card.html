{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>Ajouter une carte</h2>
    <form id="cardForm" class="mt-4">
        <div class="mb-3">
            <label for="question" class="form-label">Question</label>
            <textarea class="form-control" id="question" rows="3" required></textarea>
        </div>
        
        <div class="mb-3">
            <label for="response" class="form-label">Réponse</label>
            <textarea class="form-control" id="response" rows="3" required></textarea>
        </div>

        <div class="mb-3">
            <label class="form-label">Tags</label>
            <div id="tagsContainer">
                <div class="tag-input-group mb-2">
                    <input type="text" class="form-control tag-input" placeholder="Nouveau tag">
                    <button type="button" class="btn btn-primary add-tag-btn">Ajouter Tag</button>
                </div>
            </div>
            <div id="tagsList" class="mt-2"></div>
        </div>

        <div class="mb-3">
            <label for="feedback" class="form-label">Feedback/Note</label>
            <textarea class="form-control" id="feedback" rows="2"></textarea>
        </div>

        <div class="mb-3">
            <label class="form-label">Multimédia</label>
            <div class="input-group mb-2">
                <span class="input-group-text">Image</span>
                <input type="file" class="form-control" id="image" accept="image/*">
            </div>
            <div class="input-group mb-2">
                <span class="input-group-text">Audio</span>
                <input type="file" class="form-control" id="audio" accept="audio/*">
            </div>
            <div class="input-group">
                <span class="input-group-text">Vidéo</span>
                <input type="file" class="form-control" id="video" accept="video/*">
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Ajouter la carte</button>
        <a href="/decks/{{ deck.id }}" class="btn btn-secondary">Retour au deck</a>
    </form>
</div>

<script>
    const deckId = "{{ deck.id }}";
</script>
<script src="{{ url_for('static', filename='js/add_card.js') }}"></script>

<style>
.tag-input-group, .subtag-input-group {
    display: flex;
    gap: 10px;
    align-items: start;
}

.tag-item {
    background-color: #f8f9fa;
}

.subtag-input-group {
    margin-left: 20px;
    margin-top: 10px;
}

.tag-item button {
    padding: 0 8px;
    font-size: 14px;
}

.subtags-list {
    margin-left: 20px;
}
</style>
{% endblock %}